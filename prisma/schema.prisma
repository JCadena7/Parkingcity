generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Pago {
  id_pago      Int      @id @default(autoincrement())
  id_parqueo   Int?     @map("id_parqueo")
  monto        Decimal  @db.Decimal(10, 2)
  fecha_pago   DateTime
  parqueo      Parqueo? @relation(fields: [id_parqueo], references: [id_parqueo])

  @@index([id_parqueo], name: "id_parqueo")
}

model Parqueo {
  id_parqueo   Int      @id @default(autoincrement())
  placa        String   @unique @db.VarChar(10)
  hora_entrada DateTime
  hora_salida  DateTime?
  costo_total  Decimal? @db.Decimal(10, 2)
  pagos        Pago[]

}

model Reporte {
  id_reporte    Int       @id @default(autoincrement())
  id_usuario    Int?      @map("id_usuario")
  tipo_reporte  TipoReporte
  descripcion   String?   @db.Text
  fecha_reporte DateTime  @default(now())
  usuario       Usuario?  @relation(fields: [id_usuario], references: [id_usuario])

  @@index([id_usuario], name: "id_usuario")
}

model Tarifa {
  id_tarifa          Int       @id @default(autoincrement())
  tipo_vehiculo      TipoVehiculo
  tarifa_por_minuto  Decimal   @db.Decimal(10, 2)
  fecha_actualizacion DateTime @default(now())
}

model Usuario {
  id_usuario Int      @id @default(autoincrement())
  username   String   @unique @db.VarChar(50)
  password   String   @db.VarChar(255)
  role       UserRole
  reportes   Reporte[]
}

enum TipoReporte {
  parqueo
  pago
}

enum TipoVehiculo {
  carro
  moto
  camion
}

enum UserRole {
  admin
  user
}
